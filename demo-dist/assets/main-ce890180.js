var vt=Object.defineProperty;var gt=(n,t,e)=>t in n?vt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var u=(n,t,e)=>(gt(n,typeof t!="symbol"?t+"":t,e),e);import{r as m,j as E,_ as b,c as kt,R as yt}from"./preload-helper-d14b839a.js";const rt=m.createContext(null);function X(n){const t=m.useContext(rt);if(t===null)throw TypeError(`Cannot use ${n} outside <RouterView /> scope`);return t}const at=m.createContext(null);function ot(n){const t=m.useContext(at);if(t===null)throw TypeError(`Cannot use ${n} outside <LookPage /> scope`);return t}const tt=m.createContext(null);tt.displayName="OutletContext";function ge(){return m.useContext(tt)}const st=m.createContext(null);function Pt(){const n=m.useContext(st);if(n===null)throw TypeError("Cannot use useLookPageVisible outside <RouterView /> scope");return n}function N(){return N=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},N.apply(this,arguments)}var S;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(S||(S={}));var F=function(n){return n},G="beforeunload",wt="hashchange",it="popstate";function Et(n){n===void 0&&(n={});var t=n,e=t.window,r=e===void 0?document.defaultView:e,a=r.history;function o(){var d=r.location,l=d.pathname,h=d.search,v=d.hash,g=a.state||{};return[g.idx,F({pathname:l,search:h,hash:v,state:g.usr||null,key:g.key||"default"})]}var s=null;function c(){if(s)y.call(s),s=null;else{var d=S.Pop,l=o(),h=l[0],v=l[1];if(y.length){if(h!=null){var g=p-h;g&&(s={action:d,location:v,retry:function(){$(g*-1)}},$(g))}}else L(d)}}r.addEventListener(it,c);var i=S.Pop,f=o(),p=f[0],k=f[1],_=Q(),y=Q();p==null&&(p=0,a.replaceState(N({},a.state,{idx:p}),""));function C(d){return typeof d=="string"?d:q(d)}function V(d,l){return l===void 0&&(l=null),F(N({pathname:k.pathname,hash:"",search:""},typeof d=="string"?U(d):d,{state:l,key:ct()}))}function H(d,l){return[{usr:d.state,key:d.key,idx:l},C(d)]}function x(d,l,h){return!y.length||(y.call({action:d,location:l,retry:h}),!1)}function L(d){i=d;var l=o();p=l[0],k=l[1],_.call({action:i,location:k})}function R(d,l){var h=S.Push,v=V(d,l);function g(){R(d,l)}if(x(h,v,g)){var P=H(v,p+1),w=P[0],A=P[1];try{a.pushState(w,"",A)}catch{r.location.assign(A)}L(h)}}function I(d,l){var h=S.Replace,v=V(d,l);function g(){I(d,l)}if(x(h,v,g)){var P=H(v,p),w=P[0],A=P[1];a.replaceState(w,"",A),L(h)}}function $(d){a.go(d)}var O={get action(){return i},get location(){return k},createHref:C,push:R,replace:I,go:$,back:function(){$(-1)},forward:function(){$(1)},listen:function(l){return _.push(l)},block:function(l){var h=y.push(l);return y.length===1&&r.addEventListener(G,J),function(){h(),y.length||r.removeEventListener(G,J)}}};return O}function xt(n){n===void 0&&(n={});var t=n,e=t.window,r=e===void 0?document.defaultView:e,a=r.history;function o(){var l=U(r.location.hash.substr(1)),h=l.pathname,v=h===void 0?"/":h,g=l.search,P=g===void 0?"":g,w=l.hash,A=w===void 0?"":w,j=a.state||{};return[j.idx,F({pathname:v,search:P,hash:A,state:j.usr||null,key:j.key||"default"})]}var s=null;function c(){if(s)y.call(s),s=null;else{var l=S.Pop,h=o(),v=h[0],g=h[1];if(y.length){if(v!=null){var P=p-v;P&&(s={action:l,location:g,retry:function(){O(P*-1)}},O(P))}}else R(l)}}r.addEventListener(it,c),r.addEventListener(wt,function(){var l=o(),h=l[1];q(h)!==q(k)&&c()});var i=S.Pop,f=o(),p=f[0],k=f[1],_=Q(),y=Q();p==null&&(p=0,a.replaceState(N({},a.state,{idx:p}),""));function C(){var l=document.querySelector("base"),h="";if(l&&l.getAttribute("href")){var v=r.location.href,g=v.indexOf("#");h=g===-1?v:v.slice(0,g)}return h}function V(l){return C()+"#"+(typeof l=="string"?l:q(l))}function H(l,h){return h===void 0&&(h=null),F(N({pathname:k.pathname,hash:"",search:""},typeof l=="string"?U(l):l,{state:h,key:ct()}))}function x(l,h){return[{usr:l.state,key:l.key,idx:h},V(l)]}function L(l,h,v){return!y.length||(y.call({action:l,location:h,retry:v}),!1)}function R(l){i=l;var h=o();p=h[0],k=h[1],_.call({action:i,location:k})}function I(l,h){var v=S.Push,g=H(l,h);function P(){I(l,h)}if(L(v,g,P)){var w=x(g,p+1),A=w[0],j=w[1];try{a.pushState(A,"",j)}catch{r.location.assign(j)}R(v)}}function $(l,h){var v=S.Replace,g=H(l,h);function P(){$(l,h)}if(L(v,g,P)){var w=x(g,p),A=w[0],j=w[1];a.replaceState(A,"",j),R(v)}}function O(l){a.go(l)}var d={get action(){return i},get location(){return k},createHref:V,push:I,replace:$,go:O,back:function(){O(-1)},forward:function(){O(1)},listen:function(h){return _.push(h)},block:function(h){var v=y.push(h);return y.length===1&&r.addEventListener(G,J),function(){v(),y.length||r.removeEventListener(G,J)}}};return d}function J(n){n.preventDefault(),n.returnValue=""}function Q(){var n=[];return{get length(){return n.length},push:function(e){return n.push(e),function(){n=n.filter(function(r){return r!==e})}},call:function(e){n.forEach(function(r){return r&&r(e)})}}}function ct(){return Math.random().toString(36).substr(2,8)}function q(n){var t=n.pathname,e=t===void 0?"/":t,r=n.search,a=r===void 0?"":r,o=n.hash,s=o===void 0?"":o;return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function U(n){var t={};if(n){var e=n.indexOf("#");e>=0&&(t.hash=n.substr(e),n=n.substr(0,e));var r=n.indexOf("?");r>=0&&(t.search=n.substr(r),n=n.substr(0,r)),n&&(t.pathname=n)}return t}function K(n){return n.join("/").replace(/\/\/+/g,"/")}function bt(n){return n.replace(/\/+$/,"").replace(/^\/*/,"/")}function St(n){return!n||n==="?"?"":n.startsWith("?")?n:`?${n}`}function _t(n){return!n||n==="#"?"":n.startsWith("#")?n:`#${n}`}function Lt(n,t){const e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Rt(n,t="/"){const{pathname:e,search:r="",hash:a=""}=typeof n=="string"?U(n):n;return{pathname:e?e.startsWith("/")?e:Lt(e,t):t,search:St(r),hash:_t(a)}}function et(n,t){const e=typeof n=="string"?U(n):n,{pathname:r,search:a}=e;if(r&&(r!=null&&r.includes("#")||r!=null&&r.includes("?"))||a&&a.includes("#"))throw Error(`
<Link to="..."> Error
1. pathname cannot contain # or /
2. search cannot contain #
`);const o=t.map(i=>i.pathname);let s;if(r==null)s=o[o.length-1]||"/";else{const i=!r.startsWith("/");let f=o.length-1;if(!i&&r.startsWith("..")){const p=r.split("/");for(;p[0]==="..";)p.shift(),f-=1;e.pathname=p.join("/")}s=f>=0?o[f]:"/"}return Rt(e,s)}function lt(n){const{instance:t}=ot("useHref");return et(n,t.matches)}function ut(n){const t=m.useRef(n);return t.current=n,m.useCallback((...e)=>{var r;return(r=t.current)==null?void 0:r.call(t,...e)},[])}function $t(){const{router:n}=X("useNavigate"),{instance:t}=ot("useNavigate");return ut((e,r={})=>{const{replace:a=!1,state:o,clean:s}=r;if(typeof e=="number"){n.go(e);return}const c=et(e,t.matches);s&&n.clean(),r!=null&&r.switch?n.switch(c,o):a?n.replace(c,o):n.push(c,o)})}function At(n,t){const{onClick:e,to:r,replace:a=!1,children:o,switch:s=!1,clean:c=!1,...i}=n,{router:f}=X("<Link />"),p=$t(),k=lt(r);return E.jsx("a",{...i,ref:t,onClick:_=>{_.preventDefault(),_.stopPropagation(),p(k,{replace:a,switch:s,clean:c})},href:f.instance.createHref(k),children:o})}const Tt=m.forwardRef(At);function Ct(n,t){const{className:e="",style:r,pathname:a,children:o,noStyle:s}=n,c=Pt();return E.jsx("div",{ref:t,className:`look-page ${e}`,"data-route":a,style:{...!s&&{overflow:"auto",height:"100vh"},...r,...!c&&{display:"none"}},children:o})}const Ot=m.forwardRef(Ct);function jt(){const{router:n}=X("useLocation"),[t,e]=m.useState(n.instance.location);return m.useEffect(()=>n.listen(r=>{e(r)}),[n]),t}function It(n,t){const{className:e,style:r,children:a,to:o,...s}=n,c=lt(o),f={isActive:jt().pathname===c.pathname};let p;typeof e=="function"?p=e(f):p=[e,f.isActive?"active":null].filter(Boolean).join(" ");const k=typeof r=="function"?r(f):r;return E.jsx(Tt,{...s,ref:t,to:c,className:p,style:k,children:typeof a=="function"?a(f):a})}const ke=m.forwardRef(It),Bt=n=>{const{data:t}=n,{route:e,pathname:r,visible:a,children:o}=t,{router:s}=X("<LookPageWrapper />"),{globalWrapper:c}=s,i=e.wrapper===null?null:e.wrapper||c||Ot,f=e.component,p=m.useMemo(()=>({instance:t}),[t]),k=E.jsx(tt.Provider,{value:o||null,children:m.createElement(f)});return E.jsx(st.Provider,{value:a,children:E.jsx(at.Provider,{value:p,children:i?E.jsx(i,{pathname:r,children:k}):k})})};var ht={exports:{}},ft={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z=m;function Vt(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Vt,Wt=z.useState,Nt=z.useEffect,zt=z.useLayoutEffect,Dt=z.useDebugValue;function Mt(n,t){var e=t(),r=Wt({inst:{value:e,getSnapshot:t}}),a=r[0].inst,o=r[1];return zt(function(){a.value=e,a.getSnapshot=t,Y(a)&&o({inst:a})},[n,e,t]),Nt(function(){return Y(a)&&o({inst:a}),n(function(){Y(a)&&o({inst:a})})},[n]),Dt(e),e}function Y(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Ht(n,e)}catch{return!0}}function Ut(n,t){return t()}var qt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ut:Mt;ft.useSyncExternalStore=z.useSyncExternalStore!==void 0?z.useSyncExternalStore:qt;ht.exports=ft;var Kt=ht.exports;const Ft=n=>{const{router:t,onChange:e,children:r}=n,a=Kt.useSyncExternalStore(t.stack.addListener,t.stack.getSnapshot),o=m.useMemo(()=>({router:t}),[t]),s=ut(e);return m.useEffect(()=>t.listen((c,i)=>{s==null||s({location:c,matches:i})}),[t,s]),E.jsx("div",{className:"look-router-hosts",style:{overflow:"hidden",height:"100vh"},children:E.jsxs(rt.Provider,{value:o,children:[r,a.map(c=>E.jsx(Bt,{data:c},c.key))]})})},Gt=/^:\w+$/,Jt=3,Qt=2,Xt=1,Yt=10,Zt=-2,nt=n=>n==="*";function te(n,t){const e=n.split("/");let r=e.length;return e.some(nt)&&(r+=Zt),t&&(r+=Qt),e.filter(a=>!nt(a)).reduce((a,o)=>{let s=a;return Gt.test(o)?s+=Jt:o===""?s+=Xt:s+=Yt,s},r)}function ee(n){const t=[],e=(a,o="",s=[])=>{a.forEach(c=>{r(c,o,s)})},r=(a,o="",s=[])=>{if("index"in a)return;const{children:c}=a,i={relativePath:a.path,route:a};if(i.relativePath.startsWith("/")){if(!i.relativePath.startsWith(o))throw new Error(`Absolute route path "${i.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`);i.relativePath=i.relativePath.slice(o.length)}const f=K([o,i.relativePath]);i.route={...i.route,path:f};const p=s.concat(i);Array.isArray(c)&&c.length>0&&e(c,f,p),t.push({path:f,score:te(f),routesMeta:p})};return e(n),t.sort((a,o)=>o.score-a.score),t}function ne(n,t){let e=-1;for(let r=0;r<n.length;r+=1)t(n[r],r)&&(e=r);return e}class B{constructor(){u(this,"value",[]);u(this,"push",t=>{this.value.push([t])});u(this,"switch",t=>{if(this.value.length>0){const e=this.value[this.value.length-1],r=e.findIndex(a=>B.eq(a,t));r>-1&&e.splice(r,1),e.push(t)}else this.push(t)});u(this,"popLast",()=>{const t=this.value.pop();return t&&t[t.length-1]});u(this,"pop",t=>{const e=ne(this.value,r=>r.findIndex(a=>a.pathname===t.pathname&&a.search===t.search)>-1);e!==-1&&(this.value=this.value.slice(0,e+1))});u(this,"has",t=>this.value.findIndex(e=>e.findIndex(r=>B.eq(t,r))>-1)>-1);u(this,"clean",()=>{this.value=[]})}static eq(t,e){return t.pathname===e.pathname&&t.search===e.search}static encode(t){return`${t.pathname}${t.search}`}get countMap(){const t={};return this.value.forEach(e=>{e.forEach(r=>{const a=B.encode(r);let o=t[a];o===void 0&&(o=t[a]={value:r,count:0}),o.count+=1})}),t}get keys(){return Object.keys(this.countMap)}}function re(n,t=!1){const e=[];let r=`^${n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,c)=>(e.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"))}`;return n.endsWith("*")?(e.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),{matcher:new RegExp(r,"i"),compiledParams:e}}function ae(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return console.warn(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function oe(n,t,e){const r=[],{routesMeta:a}=e,o={};let s="/";for(let c=0;c<a.length;c+=1){const i=a[c],{route:f}=i,p=c===a.length-1,{matcher:k,compiledParams:_}=re(i.relativePath,p),C=(s==="/"?n:n.slice(s.length)||"/").match(k);if(!C)return null;const V=C.slice(1),x={params:_.reduce((R,{paramName:I,isOptional:$},O)=>{const d=V[O];return $&&!d?R[I]=void 0:R[I]=(d||"").replace(/%2F/g,"/"),R},{}),pathname:C[0],pathnameBase:C[0].replace(/(.)\/+$/,"$1")};Object.assign(o,x.params);const L={params:o,pathname:K([s,x.pathname]),route:f,pathnameBase:bt(K([s,x.pathnameBase])),search:""};L.pathname===n&&t.length>0&&(L.search=t.startsWith("?")?t:`?${t}`),r.push(L),x.pathnameBase!=="/"&&(s=K([s,x.pathnameBase]))}return r}function se(n,t){let e=null;for(let r=0;e===null&&r<t.length;r+=1){const a=ae(n.pathname);e=oe(a,n.search,t[r])}return e}function ie(){const n=new Set;let t=!1;return{get isBlock(){return t},block(e){return n.add(e),t=!0,()=>{n.delete(e),t=n.size>0}},shouldBlock(e){if(!t)return!1;const r=n.size>0;return n.forEach(a=>{a({proceed(){t=!1,e.proceed()},to:e.to,from:e.from})}),r}}}var D=(n=>(n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE",n.Switch="SWITCH",n.UpdateSearch="UPDATE_SEARCH",n))(D||{});function W(){return(window.history.state||{idx:null}).idx}function ce(n){let t=W();t==null&&(t=0,window.history.replaceState({...window.history.state,idx:t},""));const e=ie();let r="POP";const a={...n,get location(){return n.location},listen(o){let s=!1,c=n.location;return n.listen(i=>{let f=null;if(i.action===S.Pop){const p=W();f=p==null?null:p-t,t=p,f&&f>0&&(r="PUSH")}if(s){s=!1;return}if(e.isBlock&&f!=null){s=!0,n.go(f*-1);const p=f,k={proceed:()=>{setTimeout(()=>{n.go(p)})},from:c,to:i.location};if(e.shouldBlock(k))return}o({action:r,location:i.location,delta:f}),r="POP",c=i.location})},block(o){return e.block(o)},go(o){r=o>0?"PUSH":"POP",n.go(o)},forward(){r="PUSH",n.go(1)},back(){r="POP",n.go(-1)},push:(o,s)=>{const c={proceed:()=>a.push(o,s),from:n.location,to:o};e.shouldBlock(c)||(t=W()+1,r="PUSH",n.push(o,s))},replace:(o,s)=>{const c={proceed:()=>a.replace(o,s),from:n.location,to:o};e.shouldBlock(c)||(t=W(),r="REPLACE",n.replace(o,s))},switch:(o,s)=>{const c={proceed:()=>a.switch(o,s),from:n.location,to:o};e.shouldBlock(c)||(t=W(),r="SWITCH",n.replace(o,s))},setAction:o=>{r=o},updateSearch:o=>{t=W(),r="UPDATE_SEARCH",n.replace(o)}};return a}function le(n,t){if(Array.isArray(n))for(let e=n.length-1;e>=0;e-=1)t(n[e],e)}function ue(){let n=0;return{new(t){return typeof t=="string"?`${t}`:`globalKey:${++n}`}}}const pt=ue();function dt(n){const{matched:t,matches:e,children:r}=n,{route:a,pathname:o,search:s,params:c}=t;if(typeof a!="object"||a===null||!a)throw Error("[look-router]: Route does not exist");return{visible:!1,key:pt.new(),pathname:o,children:r,parent:void 0,search:s,params:c,route:{...a,parentPath:void 0},matches:e}}function he(n){const{matches:t}=n;return dt({matched:t[0],matches:t})}function fe(n){const{matches:t}=n,e=[];let r;return le(t,(a,o)=>{const s=dt({matched:a,children:r,matches:t.slice(0,o+1)});r==null||r.forEach(c=>{c.parent=s,c.route.parentPath=s.route.path}),e.unshift(s),r=[s]}),e}class M{constructor(){u(this,"stack");u(this,"value");u(this,"setStack",t=>{this.stack=t,this.value=this.stack.filter(e=>e.parent===void 0)});u(this,"find",t=>this.stack.find(e=>M.eq(t,e)));u(this,"findIndex",t=>this.stack.findIndex(t));u(this,"has",t=>this.stack.findIndex(e=>M.eq(t,e))>-1);u(this,"at",t=>{if(t>=-this.stack.length&&t<this.stack.length)return t>=0?this.stack[t]:this.stack[this.stack.length+t]});u(this,"push",(...t)=>{this.setStack([...this.stack,...t])});u(this,"update",(t,e)=>{this.stack[t]=e});u(this,"visible",t=>{if(this.stack.forEach(e=>{e.visible=!1}),t!==void 0){const e=this.find(t);if(!e)throw Error(`${t.pathname} does not exist`);M.getParents(e).forEach(a=>{a.visible=!0})}this.notifyListener()});u(this,"listeners",new Set);u(this,"addListener",t=>(this.listeners.add(t),()=>{this.listeners.delete(t)}));u(this,"getSnapshot",()=>this.value);u(this,"notifyListener",()=>{this.listeners.forEach(t=>t())});this.stack=[],this.value=[]}static create(t){return{...t,visible:t.visible||!1,key:pt.new()}}static eq(t,e){return t.key!==void 0&&e.key!==void 0?t.key===e.key:t.pathname===e.pathname&&t.search===e.search}static getParents(t,e=!0){const r=e?[t]:[];let{parent:a}=t;for(;a!==void 0;)r.unshift(a),a=a.parent;return r}}const T=class T{constructor(t){u(this,"instance");u(this,"block");u(this,"push");u(this,"replace");u(this,"go");u(this,"switch");u(this,"history",new B);u(this,"stack",new M);u(this,"flattenRoutes");u(this,"routes");u(this,"globalWrapper");u(this,"from");u(this,"updateFrom",()=>{this.from={...this.instance.location}});u(this,"onBeforeEntering");u(this,"onAfterEntering");u(this,"listener",new Set);u(this,"listen",t=>(this.listener.add(t),()=>{this.listener.delete(t)}));u(this,"init",()=>{this.instance.listen(async t=>{const e=await this.listenImpl(t);e!==null&&this.listener.forEach(r=>{T.dispatchListener(t.location,r,e)})}),this.replace(this.instance.location,this.instance.location.state)});u(this,"clean",()=>{this.stack.setStack([]),this.history.clean()});u(this,"updateSearch",(t,e)=>{const{pathname:r,search:a}=t,o=this.stack.find({pathname:t.pathname,search:e});if(!o){console.error(`Update search failed, ${r} route not found`);return}o.search=a;const s={pathname:r,search:a};this.history.popLast(),this.history.push(s),this.stack.setStack(this.stack.stack.slice()),this.instance.updateSearch(t)});u(this,"listenImpl",async t=>{const{location:e,action:r}=t;if(r===D.UpdateSearch)return;const a=se(e,this.flattenRoutes),o=await this.onBeforeEntering(e,a||void 0);if(o.pathname!==e.pathname||(o.hash||"")!==e.hash||(o.search||"")!==e.search)return this.replace(o,e.state),null;if(!a)throw Error(`${e.pathname} does not exist`);const s=a[a.length-1];if(s.route.redirectTo){const{redirectTo:c}=s.route,i=et(typeof c=="function"?c(e):c,a);this.history.push({pathname:e.pathname,search:e.search}),this.replace(i);return}switch(r){case D.Push:{this.routerPush(e,a);break}case D.Replace:{this.routerReplace(e,a);break}case D.Switch:{this.routerSwitch(e,a);break}default:{this.routerPop(e,a);break}}return this.onAfterEntering(a),a});u(this,"routerPush",(t,e)=>{const{pathname:r,search:a}=t,o={pathname:r,search:a};if(!Array.isArray(e)||(e==null?void 0:e.length)===0)throw Error("[look-router]: Route does not exist");this.history.push(o),this.stack.has(o)&&this.stack.visible(o);const s=T.renderRoute(e);this.stack.setStack(this.diff(this.stack.stack,s)),this.stack.visible(o)});u(this,"routerReplace",(t,e)=>{const{pathname:r,search:a}=t,o={pathname:r,search:a};this.history.popLast(),this.history.push(o);const s=T.renderRoute(e),c=this.diff(this.stack.stack,s);this.stack.setStack(c),this.stack.visible(o)});u(this,"routerPop",(t,e)=>{const{pathname:r,search:a}=t;if(!this.history.has({pathname:r,search:a})){this.routerReplace(t,e);return}this.history.pop({pathname:r,search:a});const o=T.renderRoute(e),s=this.diff(this.stack.stack,o);this.stack.setStack(s),this.stack.visible({pathname:r,search:a})});u(this,"routerSwitch",(t,e)=>{const{pathname:r,search:a}=t,o={pathname:r,search:a};this.history.switch(o);const s=T.renderRoute(e),c=this.diff(this.stack.stack,s);this.stack.setStack(c),this.stack.visible(o)});u(this,"diff",(t,e)=>{if(t.length===0)return e;const r=T.transformLookStackPageToMap(e),a=(i,f)=>i.filter(p=>p.route.parentPath===f.route.path),o=[],s=new Set,c=this.history.keys;return t.forEach(i=>{if(!i.parent)return;const f=B.encode({pathname:i.pathname,search:i.search||""});c.includes(f)&&s.add(i.parent.key)}),t.forEach(i=>{const f=B.encode({pathname:i.pathname,search:i.search??""});(this.history.countMap[f]||r.has(f)||s.has(i.key))&&(i.parent&&s.add(i.parent.key),o.push(i),r.delete(f))}),r.forEach(i=>{o.push(i)}),o.forEach((i,f,p)=>(Array.isArray(i.route.children)&&(i.children=a(p,i),i.children.forEach(k=>{k.parent=i})),i)),o});const{mode:e="hash",routes:r,globalWrapper:a,onBeforeEntering:o,onAfterEntering:s}=t;this.instance=ce(e==="history"?Et():xt()),this.routes=r,this.globalWrapper=a,this.block=this.instance.block,this.push=this.instance.push,this.replace=this.instance.replace,this.go=this.instance.go,this.switch=this.instance.switch,this.onBeforeEntering=async(c,i)=>o?await Promise.resolve(o({location:c,route:i==null?void 0:i[i.length-1].route},this.from)):c,this.onAfterEntering=c=>{s==null||s({location:this.instance.location,route:c[c.length-1].route},this.from),this.updateFrom()},this.flattenRoutes=ee(r),this.init()}static transformLookStackPageToMap(t){const e=new Map;return t.forEach(r=>{const a=B.encode({pathname:r.pathname,search:r.search??""});e.set(a,r)}),e}};u(T,"dispatchListener",(t,e,r)=>{e==null||e(t,r)}),u(T,"renderRoute",t=>t.length>1?fe({matches:t}):[he({matches:t})]);let Z=T;function pe(n){return new Z(n)}const mt=pe({onAfterEntering(n){var r;const{route:t}=n,e=`${((r=t==null?void 0:t.meta)==null?void 0:r.title)||""}`;document.title=e},routes:[{path:"/",redirectTo:"/home",component:m.lazy(()=>b(()=>import("./index-d326bc51.js"),["./index-d326bc51.js","./preload-helper-d14b839a.js","./Outlet-cfa542ba.js"],import.meta.url)),children:[{path:"/home",component:m.lazy(()=>b(()=>import("./home-62cf8f80.js"),["./home-62cf8f80.js","./preload-helper-d14b839a.js"],import.meta.url)),meta:{title:"首页"}},{path:"/search",component:m.lazy(()=>b(()=>import("./search-6aee2579.js"),["./search-6aee2579.js","./preload-helper-d14b839a.js","./dayjs.min-36c7790a.js"],import.meta.url)),meta:{title:"搜索"}},{path:"/notifications",component:m.lazy(()=>b(()=>import("./notifications-1d136a37.js"),["./notifications-1d136a37.js","./preload-helper-d14b839a.js","./dayjs.min-36c7790a.js"],import.meta.url)),meta:{title:"通知"}},{path:"/messages",component:m.lazy(()=>b(()=>import("./messages-c5fcee42.js"),["./messages-c5fcee42.js","./preload-helper-d14b839a.js","./dayjs.min-36c7790a.js"],import.meta.url)),meta:{title:"私信"}}]},{path:"/details/:id",component:m.lazy(()=>b(()=>import("./details-9c756be7.js"),["./details-9c756be7.js","./preload-helper-d14b839a.js","./index-be4b4754.js","./clsx-0839fdbe.js"],import.meta.url)),meta:{title:"详情页"}},{path:"/nest/:id",component:m.lazy(()=>b(()=>import("./index-1747bcd3.js"),["./index-1747bcd3.js","./preload-helper-d14b839a.js","./clsx-0839fdbe.js","./Outlet-cfa542ba.js","./index-be4b4754.js"],import.meta.url)),meta:{title:"嵌套页"},children:[{index:!0,component:m.lazy(()=>b(()=>import("./default-c49900bb.js"),["./default-c49900bb.js","./preload-helper-d14b839a.js"],import.meta.url))},{path:"/nest/:id/details",component:m.lazy(()=>b(()=>import("./details-c6471fdc.js"),["./details-c6471fdc.js","./preload-helper-d14b839a.js","./wrapper-817ada99.js","./clsx-0839fdbe.js"],import.meta.url)),wrapper:null,meta:{title:"嵌套页 - 详情"}},{path:"/nest/:id/comments",component:m.lazy(()=>b(()=>import("./comments-1ef30000.js"),["./comments-1ef30000.js","./preload-helper-d14b839a.js","./wrapper-817ada99.js","./clsx-0839fdbe.js"],import.meta.url)),wrapper:null,meta:{title:"嵌套页 - 评论"}}]},{path:"*",component:m.lazy(()=>b(()=>import("./404-c290cc01.js"),["./404-c290cc01.js","./preload-helper-d14b839a.js"],import.meta.url)),meta:{title:"404"}}]});window.router=mt;kt.createRoot(document.getElementById("root")).render(E.jsx(yt.StrictMode,{children:E.jsx(m.Suspense,{children:E.jsx(Ft,{router:mt})})}));export{Tt as L,ke as N,jt as a,X as b,ge as c,Bt as d,$t as e,Pt as f,ot as u};
